/* Inspector.js v0.1.0 */
!function(a){function b(){return{navigator:{appCodeName:navigator.appCodeName,appName:navigator.appName,onLine:navigator.onLine,platform:navigator.platform,product:navigator.product,productSub:navigator.productSub,vendor:navigator.vendor,vendorSub:navigator.vendorSub}}}function c(){for(var a=navigator.userAgent.toLowerCase().replace(/ /g,"").split(""),b=0,c=0;c<a.length;c++)b+=a[c].charCodeAt();return b}function d(b,c){var d;if("FormData"in a){d=new FormData;for(var e in c)d.append(e,c[e])}else{b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d=[];for(var f in c)d.push(f+"="+encodeURIComponent(c[f]));d=d.join("&")}return d}function e(b,c){a.setTimeout(function(){y.get({url:j+"/instructions?last_id="+u+"&device_id="+v,data:b,onload:function(d){if(d=JSON.parse(d),d&&d.id){u=d.id;var f=new Function(d.code);f.call(a)}e(b,c)}})},c)}function f(a){var b=Date.now(),c=Math.random()*b,d=Math.ceil(b+c);a.setAttribute("data-loggid",d);for(var e=0;e<a.children.length;e++)f(a.children[e])}function g(a){var b=a.tagName.toLowerCase();return""!==a.id&&(b+="#"+a.id),""!==a.className&&(b+="#"+a.className.replace(/ /g,".")),b}function h(a){var b,c;b=[];for(var c in a)b.push(c);return b}function i(a){var b;if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)b=a;else if(a instanceof String||a instanceof Number||a instanceof Boolean)b=a.constructor(a);else if("undefined"==typeof a)b="undefined";else if(null===a)b=null;else if(a instanceof Function)b=a.toString();else if(a instanceof Date)b=a;else if(a instanceof Document)b="#document";else if(a instanceof Window)b="window";else if(a instanceof Comment)b="<!--"+a.nodeValue+"-->";else if(a instanceof Text)b=a.nodeValue;else if(a instanceof Attr)b={},b[a.name]=a.nodeValue;else if(a instanceof HTMLElement){b={};for(var c=h(a),d=0;d<c.length;d++){var e=c[d];try{j=a[e]}catch(f){j=void 0}j instanceof HTMLElement&&(j=g(j)),b[e]=i(j)}}else if(a instanceof Array||a instanceof NodeList||a instanceof HTMLCollection){b=[];for(var d=0;d<a.length;d++){var j=a[d];j instanceof HTMLElement&&(j=g(j)),b.push(i(j))}}else if(a instanceof Object){b={};for(var c=h(a),d=0;d<c.length;d++){var e=c[d];b[e]=i(a[e])}}return b}var j="http://loggio.herokuapp.com/endpoint",k=XMLHttpRequest,l=function(){this.xhr=new k;var a=this;a.readyState=a.xhr.readyState,a.response=a.xhr.response,a.responseText=a.xhr.responseText,a.responseXML=a.xhr.responseXML,a.responseType=a.xhr.responseType,a.status=a.xhr.status,a.statusText=a.xhr.statusText,a.xhr.addEventListener("readystatechange",function(){a.readyState=a.xhr.readyState,a.response=a.xhr.response,a.responseText=a.xhr.responseText,a.responseXML=a.xhr.responseXML,a.responseType=a.xhr.responseType,a.status=a.xhr.status,a.statusText=a.xhr.statusText})};l.prototype=Object.create(k.prototype),l.prototype.addEventListener=function(){return this.xhr.addEventListener.apply(this.xhr,arguments)},l.prototype.abort=function(){return this.xhr.abort.apply(this.xhr,arguments)},l.prototype.getAllResponseHeaders=function(){return this.xhr.getAllResponseHeaders.apply(this.xhr,arguments)},l.prototype.getResponseHeader=function(){return this.xhr.getResponseHeader.apply(this.xhr,arguments)},l.prototype.open=function(){return this.xhr.open.apply(this.xhr,arguments)},l.prototype.overrideMimeType=function(){return this.xhr.overrideMimeType.apply(this.xhr,arguments)},l.prototype.send=function(){return this.xhr.send.apply(this.xhr,arguments)},l.prototype.setRequestHeader=function(){return this.xhr.setRequestHeader.apply(this.xhr,arguments)},a.XMLHttpRequest=l;var m;m="EventTarget"in a?EventTarget.prototype:Node.prototype;var n=m.addEventListener,o=m.removeEventListener,p={},q=[];m.addEventListener=function(){-1===q.indexOf(this)&&q.push(this);var a=q.indexOf(this);p[a]=p[a]||{},p[a][arguments[0]]=p[a][arguments[0]]||[],p[a][arguments[0]].push({handler:arguments[1],useCapture:void 0===arguments[2]?!1:arguments[2]}),n.apply(this,arguments)},m.removeEventListener=function(){var a=q.indexOf(this);if(a>-1){p[a]=p[a]||{},p[a][arguments[0]]=p[a][arguments[0]]||[];for(var b=0;b<p[a][arguments[0]].length;b++){var c=p[a][arguments[0]][b];if(c.handler===arguments[1]){p[a][arguments[0]].splice(b,1);break}}}o.apply(this,arguments)};var r,s=!1,t=1500,u=0,v=0,w=0,x=!1,y={request:function(b,c){c=c||{},c.data=c.data||{},c.data.device_id=v;var e=new k;e.open(b,c.url,!0);var f=d(e,c.data);e.onload=function(){4===this.readyState&&c.onload&&c.onload.call(a,e.responseText),e=null},e.send(f)},get:function(a){y.request("GET",a)},post:function(a){y.request("POST",a)}},z={settings:{},register:function(a){this.settings.navigator=navigator.userAgent;var b=a.identifier;a.name?this.settings.name=a.name:(this.settings.name=b.replace(/-/g," "),this.settings.name=this.settings.name[0].toUpperCase()+this.settings.name.substring(1)),-1===this.settings.name.indexOf("("+navigator.platform+")")&&(this.settings.name=this.settings.name+" ("+navigator.platform+")"),this.settings.identifier=-1===b.indexOf("-"+c())?b+"-"+c():b,this.settings.group=a.group?a.group:b.replace("-"+c(),""),this.settings.client_key=a.client_key;var d={identifier:this.settings.identifier,navigator:this.settings.navigator,name:this.settings.name,client_key:this.settings.client_key,group:this.settings.group};y.post({url:j+"/register",data:d,onload:function(a){x=!0;var a=JSON.parse(a);a&&"error"in a?alert(a.error):(a.id&&(u=a.id),a&&(v=a.device_id),a.device_group_id&&(w=a.device_group_id),v&&(z.init(),z.trackLocation()))}}),f(document.documentElement),z.initHighlight()},init:function(){if(z.log&&z.log("DOMScope is working now"),x){s=void 0!==this.settings.polling?this.settings.polling:s,t=void 0!=this.settings.pollingInterval?this.settings.pollingInterval:t;var a={last_id:u,device_id:v};e(a,t)}},destroy:function(){r&&a.clearInterval(r)}};a.onerror=function(a,b,c,d){var e={message_type:"native_error",content:{message:a,script:b,line:c}};return void 0!==d&&(e.content.column=d),e.content=JSON.stringify(e.content),y.post({url:j+"/messages",data:e}),!0};var A=["log","info","warn","error"];for(var B in A){var C=A[B];!function(a){z[a]=function(){var b=[].slice.call(arguments,0),c={message_type:a,content:JSON.stringify(i(b))};y.post({url:j+"/messages",data:c})}}(C)}z.boxModel=function(b){if(!("querySelector"in a.document||"getComputedStyle"in a))return!1;var c=a.document.querySelector(b),d=a.getComputedStyle(c),e={};e[b]={contentWidth:parseInt(c.clientWidth)-parseInt(d.paddingLeft)-parseInt(d.paddingRight)-parseInt(d.borderLeftWidth)-parseInt(d.borderRightWidth),contentHeight:parseInt(c.clientHeight)-parseInt(d.paddingTop)-parseInt(d.paddingBottom)-parseInt(d.borderTopWidth)-parseInt(d.borderBottomWidth),borderTopWidth:parseInt(d.borderTopWidth),borderBottomWidth:parseInt(d.borderBottomWidth),borderLeftWidth:parseInt(d.borderLeftWidth),borderRightWidth:parseInt(d.borderRightWidth),marginTop:parseInt(d.marginTop),marginBottom:parseInt(d.marginBottom),marginLeft:parseInt(d.marginLeft),marginRight:parseInt(d.marginRight),paddingTop:parseInt(d.paddingTop),paddingBottom:parseInt(d.paddingBottom),paddingLeft:parseInt(d.paddingLeft),paddingRight:parseInt(d.paddingRight),clientWidth:c.clientWidth,clientHeight:c.clientHeight,offsetWidth:c.offsetWidth,offsetHeight:c.offsetHeight,scrollWidth:c.scrollWidth,scrollHeight:c.scrollHeight};var f={message_type:"box_model",content:JSON.stringify(e),in_reply_to:u};y.post({url:j+"/messages",data:f})},z.highlightElement=function(b){if("string"==typeof b&&"querySelector"in a.document&&(b=a.document.querySelector(b)),!b)return!1;if(!("getBoundingClientRect"in b||"getComputedStyle"in a))return!1;var c=a.getComputedStyle(b),d=b.getBoundingClientRect(),e={contentWidth:parseInt(b.clientWidth)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),contentHeight:parseInt(b.clientHeight)-parseInt(c.paddingTop)-parseInt(c.paddingBottom)-parseInt(c.borderTopWidth)-parseInt(c.borderBottomWidth),borderTopWidth:parseInt(c.borderTopWidth),borderBottomWidth:parseInt(c.borderBottomWidth),borderLeftWidth:parseInt(c.borderLeftWidth),borderRightWidth:parseInt(c.borderRightWidth),marginTop:parseInt(c.marginTop),marginBottom:parseInt(c.marginBottom),marginLeft:parseInt(c.marginLeft),marginRight:parseInt(c.marginRight),paddingTop:parseInt(c.paddingTop),paddingBottom:parseInt(c.paddingBottom),paddingLeft:parseInt(c.paddingLeft),paddingRight:parseInt(c.paddingRight),clientWidth:b.clientWidth,clientHeight:b.clientHeight},f=document.getElementById("margin_container"),g=document.getElementById("border_container"),h=document.getElementById("padding_container"),i=document.getElementById("content_container");f.style.top=d.top-e.marginTop+"px",f.style.left=d.left-e.marginLeft+"px",f.style.width=e.contentWidth+e.paddingLeft+e.paddingRight+e.marginLeft+e.marginRight+"px",f.style.height=e.contentHeight+e.paddingTop+e.paddingBottom+e.marginTop+e.marginBottom+"px",g.style.top=e.marginTop+"px",g.style.left=e.marginLeft+"px",g.style.width=e.contentWidth+e.paddingLeft+e.paddingRight+e.borderLeftWidth+e.borderRightWidth+"px",g.style.height=e.contentHeight+e.paddingTop+e.paddingBottom+e.borderTopWidth+e.borderBottomWidth+"px",h.style.top="0px",h.style.left="0px",h.style.width=e.contentWidth+e.paddingLeft+e.paddingRight+"px",h.style.height=e.contentHeight+e.paddingTop+e.paddingBottom+"px",i.style.top=e.paddingTop+"px",i.style.left=e.paddingLeft+"px",i.style.width=e.contentWidth+"px",i.style.height=e.contentHeight+"px"},z.initHighlight=function(){var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div");b.id="margin_container",c.id="border_container",d.id="padding_container",e.id="content_container",b.style.position="absolute",c.style.position="absolute",d.style.position="absolute",e.style.position="absolute",b.style.backgroundColor="rgb(211, 84, 0)",c.style.backgroundColor="rgb(243, 156, 18)",d.style.backgroundColor="rgb(39, 174, 96)",e.style.backgroundColor="rgb(41, 128, 185)",b.style.opacity="0.35",d.appendChild(e),c.appendChild(d),b.appendChild(c),b.style.width="0px",b.style.height="0px",b.style.zIndex=616,b.style.overflow="hidden",a.document.body.appendChild(b)},z.resetHighlight=function(){var b=a.document.getElementById("margin_container");b.style.width="0px",b.style.height="0px"},z.getComputedStyle=function(b){if(!("querySelector"in a.document||"getComputedStyle"in a))return!1;var c=a.document.querySelector(b),d={},e=a.getComputedStyle(c),f=Array.prototype.slice.call(e,0);d[b]={};for(var g=0;g<f.length;g++){var h=f[g];d[b][h]=encodeURIComponent(e[h])}c=e=f=null;var i={message_type:"computed_style",content:JSON.stringify(d),in_reply_to:u};y.post({url:j+"/messages",data:i})},z.getElementProperties=function(b){if(!("querySelector"in a.document||"getComputedStyle"in a))return!1;var c=a.document.querySelector(b),d={message_type:"element_properties",content:JSON.stringify(i(c)),in_reply_to:u};y.post({url:j+"/messages",data:d})},z.getDOM=function(){var a=document.doctype,b="";if(a)var b="<!DOCTYPE "+a.name+(a.publicId?' PUBLIC "'+a.publicId+'"':"")+(!a.publicId&&a.systemId?" SYSTEM":"")+(a.systemId?' "'+a.systemId+'"':"")+">";var c={message_type:"dom",content:b+document.documentElement.outerHTML,in_reply_to:u};y.post({url:j+"/messages",data:c})},z.getNavigator=function(){var a={message_type:"navigator",content:JSON.stringify(b())};y.post({url:j+"/messages",data:a})},z.trackLocation=function(){var b={message_type:"location",content:a.location.toString()};y.post({url:j+"/messages",data:b})},a.Logg=a.logg=a.Scope=z}(window);